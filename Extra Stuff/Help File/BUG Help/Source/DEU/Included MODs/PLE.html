<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE>Plot List Enhancement</TITLE>
	<STYLE TYPE="text/css">
	<!--
		P.style1 { color: #0000ff; font-size: 16pt; font-style: italic; font-weight: bold }
		P.style2 { color: #0000ff; font-size: 14pt; font-weight: bold }
		P.style3 { font-size: 14pt; font-style: italic; font-weight: bold }
		P.style4 { color: #0000ff; font-size: 12pt; font-style: italic }
	-->
	</STYLE>
</HEAD>
<BODY LANG="de-DE" DIR="LTR">
<P CLASS="style1">Plot List Enhancement</P>
<P CLASS="style3">von 12Monkeys (f&uuml;r BUG angepasst von turlute, stark modifiziert von EmperorFool)</P>
<BR>
<P CLASS="style1">&Uuml;ber Plot List Enhancement 
</P>
<P>The motivation for this mod was born when I tried to
fiddle a unit stack with a large number of units. It was a
frustrating experience, due to the strange behavior of the plot list
and some bothering bugs in Civ4. So I started to create this mod
here. It is a more or less complete reprogrammed plot list with a
bunch of new features. Not all of the features may be used at one
time, but I think everybody will find something hes looking for. It
is based on the previous version of the Plot List Enhancement
although is has been reworked completely. There is not muched left
except some graphics. 
</P>
<BR>
<P CLASS="style1">Features</P>
<P><FONT COLOR="#0000ff"><B>1.) Enhanced Unit Buttons</B></FONT></P>
<P>Each unit button provides you now with some additional
information. This makes it easier to determine what status a single
unit has, without selecting it first. 
</P>
<P>Following information is implemented : 
</P>
<OL TYPE=A>
	<LI><P STYLE="margin-bottom: 0cm"><B>Health + Movement Indicator<BR></B>The
	colored spot changes depending on how many movement points are left:
		</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">Green = All 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Yellow = Some 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Red = None 
		</P>
		<LI><P>Grey = All (skipping turn) 
		</P>
	</UL>
</OL>
<P STYLE="margin-left: 1.06cm">The spot is displayed in a darker
color, when the unit is wounded.<BR>Also, if the unit is led by a
Great General, the dot becomes a star. 
</P>
<OL START=2>
	<LI><P STYLE="margin-bottom: 0cm"><B>Health Bar<BR></B>At the top of
	each unit button, a horizontal bar is displayed. This bar indicates
	the remaining health points of the unit in percent. The colors of
	the bar can be changed. The default colors are green and red. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Movement Bar</B><BR>At the top
	of each unit button, below the health bar, another bar is
	displayed. This indicates the remaining movement points of the unit
	in percent. The colors of the bar can be changed. The default colors
	are blue and grey. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Mission Indicator</B><BR>In the
	lower right corner, the unit's mission is displayed with an icon.
	They are split into groups using their background: green for
	automation, yellow for defensive, red for offensive, light blue for
	movement and white for stationary actions. The following mission
	types are indicated (the background color is indicated in brackets)
	: 
	</P>
	<UL>
		<LI><P STYLE="margin-bottom: 0cm">Blue shield (yellow) - unit is
		fortified 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Plane (yellow) - air unit is in
		intercept mode 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Binoculars (yellow) - unit is in
		sentry mode 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Anchor (yellow) - sea unit is in
		patrol mode 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Gold symbol (red) - sea unit is
		in blockade mode 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Foot (light blue) - unit has a
		goto command 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Compass (light blue) - unit is
		exploring 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Red cross (white) - unit is in
		healing mode 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Hourglass (white) - unit is
		skipping current turn 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Z's (white) - unit is in sleep
		mode 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Hammer (green) - worker is
		automated 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">City skyline (green) - worker is
		automated (city) 
		</P>
		<LI><P STYLE="margin-bottom: 0cm">Trade symbol (green) - worker is
		automated (trade network) 
		</P>
	</UL>
	<LI><P STYLE="margin-bottom: 0cm"><B>Promotion Indicator</B><BR>A
	unit which can be promoted is displayed with a light blue frame in
	the plot list. 
	</P>
	<LI><P><B>Upgrade Indicator<BR></B>A unit which can be upgraded to
	any other unit, will get a small orange up-arrow in the lower left
	corner of its unit button. The arrow is displayed regardless whether
	you have the money for the upgrade or not. 
	</P>
</OL>
<P><FONT COLOR="#0000ff"><B>2.) Unit Mouseover Changes</B></FONT></P>
<P>When you move the mouse over any unit button in the plot list, an
info pane is displayed on the left side of the screen. This Info pane
has been been modified in the following places : </P>
<OL>
	<LI><P STYLE="margin-bottom: 0cm"><B>Remaining Movement Points</B><BR>The
	remaining movement points of the unit are displayed as a floating
	value with 1 decimal 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Strength + Turns-To-Heal</B><BR>The
	current unit strength is displayed as a floating value with 1
	decimal. In case the unit is wounded a third value is displayed in
	brackets. This number indicates the number of rounds the units need
	to heal completely under the current circumstances. This
	circumstances takes consideration of city building (like hospital),
	the unit's promotion (Medic, or any other promotion with self heal
	abilities) the promotions of units on the same or adjacent tiles,
	the territory the unit is on. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Special Abilities</B><BR>The
	special abilities a unit gains due to a promotion are displayed in a
	different color than the specials it gains due to its unit type. The
	color can be modified in the ini file, the default color is light
	gray. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Experience</B><BR>The unit's
	experience points are displayed in the following format :
	&lt;curr-exp&gt;/&lt;needed-exp&gt;. Where &lt;curr-exp&gt; is the
	units current experience points and &lt;needed-exp&gt; is the units
	needed experience points to get the next higher level. Both values
	are only displayed if the unit has an experience value &gt; 0. 
		</P>
	<LI><P><B>Level</B><BR>The unit's level is displayed in the
	following format. : &lt;curr-lev&gt;/&lt;possible-lev&gt;. Where
	&lt;curr-lev&gt; is the unit's actual level and &lt;possible-lev&gt;
	is the level the unit could have due to its experience points. In
	other words : the first value shows the number of promotions the
	unit already has, the second value shows the number of promotion the
	unit could have. Both values are displayed, as soon as one of the
	values is &gt; 0. 
	</P>
</OL>
<P>Because this info pane has to be reprogrammed completely new, the
layout differs slightly from the built-in one. There may also be some
differences in the information I haven't documented here. If so,
please contact me. </P>
<P><FONT COLOR="#0000ff"><B>3.) Plot List Selection</B></FONT></P>
<P>The selection in the plot list has also been improved by
eliminating some bugs of the Civ4 standard version : </P>
<OL>
	<LI><P STYLE="margin-bottom: 0cm">Civ4 bug : when selecting a unit
	on the very right the plot list is rebuilt so that the selected unit
	is at position 10 in the plot list - <B>fixed </B> 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Civ4 bug : under some special
	circumstances the scroll arrows did disappear - <B>fixed</B> 
	</P>
	<LI><P>Civ4 bug : when selecting a unit with Alt-key pressed, all
	units should be selected. Because it is not possible to put units
	with different domain type into one group, always the first domain
	in the plot list is selected - <B>fixed</B> - All units with
	the same domain type as the selected unit will be put together into
	a group. 
	</P>
</OL>
<P>The rest of the selection method is pretty much the same as before
: </P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm">Shift : to add single units or
	their groups to the selected group 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Ctrl : to select all units of the
	same type 
	</P>
	<LI><P>Alt : to select all units of the same domain type. 
	</P>
</UL>
<P>*Remark made (see Appendix A, (i))</P>
<P><FONT COLOR="#0000ff"><B>4.) Plot list display modes</B></FONT></P>
<P>To improve the display of a large amount of units on one plot, I
added some display modes.  These are now in cyclic format, so
that it switches to a different view each time you click in this
order: </P>
<OL>
	<LI><P STYLE="margin-bottom: 0cm"><B>Standard mode</B><BR>The units
	are displayed in one vertical line with scroll buttons on the right
	side. As already mentioned in chapter 3., the bothering bugs with
	the display have been eliminated. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Multiline mode<BR></B>All units
	are displayed in several line<B>s,</B> so that there is no scrolling
	needed. The display starts in the lower left corner. Using this
	view, no scroll buttons are needed, except you have so much units on
	one plot, that the screen height is not enough to display them in
	multi line view. In this case, vertical scroll buttons (up and down
	arrow) are displayed. 
	</P>
	<LI><P STYLE="margin-bottom: 0cm"><B>Vertical stacks</B><BR>Dependent
	on the grouping mode (see chapter 6) some units are displayed in
	vertical stacks. You can scroll left an right with the scroll
	buttons. In the unit type grouping mode, units of the same type are
	displayed in a vertical stack, in the selection group grouping mode
	selection groups are displayed in a vertical stack. 
	</P>
	<LI><P><B>Horizontal stacks<BR></B>Pretty much the same as the
	vertical stacks with the only difference, that the stacks are
	horizontal oriented. You may now ask what that is for. Two reasons.
	First: because of the different screen ratios this option may be
	better than the vertical stacks (you have smaller stacks, but more
	lines). Second : it was fun to do it ;) 
	</P>
</OL>
<P><FONT COLOR="#0000ff"><B>5.) Unit Filters</B></FONT></P>
<P>There are several unit filters added. You find them next to the
display mode buttons. The following filters have been implemented
(the button in brackets) : </P>
<OL>
	<LI><P STYLE="margin-bottom: 0cm">Units that can move (white foot) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Units that cannot move (red foot) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Wounded units (red cross) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Healthy units (green cross) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Domain filter air units (plane) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Domain filter sea units (ship) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Domain filter land units (tank) 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Combat units (crossed swords) 
		</P>
	<LI><P STYLE="margin-bottom: 0cm">Domestic units (peace symbol) 
		</P>
	<LI><P STYLE="margin-bottom: 0cm">Player units (green flag) 
	</P>
	<LI><P>Foreign units (red flag) 
	</P>
</OL>
<P>An active filter is displayed with a yellow ring. By default all
filters are inactive. To turn off all filters, press the red
&quot;null&quot; button between the upgrade grouping button and the
movement filter buttons. </P>
<P><FONT COLOR="#0000ff"><B>6.) Plot list grouping modes</B></FONT></P>
<P>There are two grouping modes implemented. The grouping modes have
influence in the order the units are displayed. If a stack display
mode (vertical or horizontal) is selected it also have an influence
on what is displayed in a stack: </P>
<OL>
	<LI><P STYLE="margin-bottom: 0cm"><B>Unit type grouping</B>
	(overlapping squares)<BR>Default grouping mode. When the
	display mode is a stack mode, then units of the same type are put
	into one stack. For more details, see Appendix (i). 
	</P>
	<LI><P><B>Selection group grouping</B> (square and triangle)<BR>Click
	on the &quot;overlapping squares&quot; button to toggle between the
	two modes. In this mode, units which are in the same
	selection group are displayed together. Also the selection groups
	are displayed right most within their domain. When the display mode
	is a stack mode, then units within the same selection group are put
	into one stack. For more details, see Appendix (ii) 
	</P>
</OL>
<P><FONT COLOR="#0000ff"><B>7.) Plot list upgrade view</B></FONT></P>
<P>The upgrade view (button with the up-arrow) can be used to get a
clear overview about the units which can be upgraded. It also
provides a simple method to upgrade a bunch of units without
selecting each unit first. </P>
<P>When you press the button only units which can be upgraded are
displayed. If you also have a stack view active, above each unit its
possible upgrades are displayed. The upgrade buttons are disable
(displayed, but you can't push them) you don't have enough money to
perform the upgrade. </P>
<P>By pressing one of those upgrade buttons, the unit is upgraded to
that type. Usually that results in that the unit disappearing from
the view, because in most cases only one upgrade is possible. If you
press the Ctrl-key when pressing an upgrade button all units on that
plot are upgraded, when pressing the Alt-key all of the player's
units are upgraded. If you run out of money during those multi
upgrades, it simply stops doing it (as in normal Civ4). 
</P>
<P>By moving the mouse over an upgrade button, a special info pane is
displayed on the left side of the screen. It provides you with the
unit type related info of the upgrade and with three values in
brackets, separated by a slash. The three values have the following
meaning: </P>
<UL>
	<LI><P STYLE="margin-bottom: 0cm">Costs to upgrade one unit 
	</P>
	<LI><P STYLE="margin-bottom: 0cm">Costs to upgrade all units on the
	plot 
	</P>
	<LI><P>Costs to upgrade all of the player's units 
	</P>
</UL>
<P>If one of the values exceeds your current budget, it is displayed
in red, otherwise in green. The colors can be modified in the
ini-file. Of course, those multi-upgrade only upgrades the units of
the same unit type.</P>
<P><FONT COLOR="#0000ff"><B>8.) Plot list promotion view</B></FONT></P>
<P>This view (button with the &quot;star&quot; on it) is very similar
to the upgrade view. It displays only units which can be promoted. If
a stack view is active, above each unit its possible promotions are
displayed. By pressing such a promotion button, the promotion is
performed and the display is refreshed. This could result in that the
unit disappears from list because there are no more promotions
possible, or that new promotions are displayed if the experience
points of the units does allow that. </P>
<P>You can use the &quot;level&quot; in the unit info pane to check
how much promotions are possible. (see chapter 2) </P>
<P><FONT COLOR="#0000ff"><B>9.) Move highlighter</B></FONT></P>
<P>When you hold down the alt-key, hover the mouse over a plot list
button, the plots the unit can reach with its remaining movement
points are highlighted.</P>
<BR>
<P CLASS="style1">Anleitung</P>
<P>Alle Einstellungen für diese Mod können im Optionsbildschirm der <b>BUG Mod</b> unter &quot;Einheitenliste&quot; vorgenommen werden.</P>
<BR>
<P CLASS="style1">Credits</P>
<P>Forum: <A HREF="http://forums.civfanatics.com/showthread.php?t=149572">http://forums.civfanatics.com/showthread.php?t=149572</A></P>
<P>Autor: <FONT COLOR="#0000ff"><I><B>12Monkeys</B></I></FONT></P>
<BR>
<P CLASS="style1">Danksagungen des Autors</P>
<P><FONT COLOR="#0000ff"><I><B>The Great Apple</B></I></FONT> and <FONT COLOR="#0000ff"><I><B>Belizan </B></I></FONT>, for the inital idea and motivation of the implemented Move Highlighter</P>
<P><FONT COLOR="#0000ff"><I><B>Dr. Elmar Jiggle</B></I></FONT>, for the used INI Parser (modders: use it!)</P>
<P><FONT COLOR="#0000ff"><I><B>Firaxis</B></I></FONT> and the <FONT COLOR="#0000ff"><I><B>Civ4-Team</B></I></FONT>, for making this game so moddable. Although I havn't played it since months, I still have a lot of fun to mod it. I never had so much fun with a game over such a long time.</P>
<P><FONT COLOR="#0000ff"><I><B>Civ4 community at civfanatics, especially in the C&amp;D subforum</B></I></FONT>, for all the inspiration, help and ideas.</P>
<BR>
<P CLASS="style1">Anhang</P>
<OL>
	<OL>
		<LI><P>The main problem of the complete mod was to modify the unit
		selection in the plot list. The existing API function
		CyInterface.selectUnit() and CyInterface.selectGroup() are quite a
		mess. You have no chance to create a selection group without the
		function CyInterface.selectGroup(). The problem with that is, that
		this function doesn't have a any parameter for a unit. It directly
		checks the existing units on the plot and takes it decisions, so
		that you don't have any influence to it. Because I want that the
		selection groups doesn't select any unit which is not displayed due
		to one of the display filter, I had to make several crazy program
		climbs (you can watch them in the selectGroup() function in the
		PLEMainInterface.py). Main method to avoid those things is to
		temporarily move away (with CyUnit.setXY()) those units I don't
		want to be added to the group, create the group with
		CyInterface.selectGroup() and then move back those &quot;parked&quot;
		units. </P>
		<P>Due to that changes it might be possible, that there are some
		error in I haven't caught so far. Also, the behavior of the
		complete selection functionality could be slightly different to
		that you know. If you found any problems, just inform me, please. </P>
	</OL>
	<LI><P STYLE="margin-bottom: 0cm"> 
	</P>
	<OL>
		<LI><P>The grouping is done by unit type. That means that the units
		are sorted in the following order : 
		</P>
	</OL>
</OL>
<OL START=2>
	<UL>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">Player: player units, then all
			other players in the order of their player id. 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Domain: sea, air, land 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Combat strength (strongest
			first) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Unit type: order by unit type
			id, descending 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Unit level: descending 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Unit experience: descending 
			</P>
			<LI><P>Unit ID: ascending - this is just added to get a
			reproducible sorting in case anything else isn't unique</P>
		</UL>
	</UL>
</OL>
<P>ATTENTION : <BR>There is one exception for the sorting:
cargoed units. As soon as a unit is cargo of another unit, the cargo
unit is always displayed BEHIND its transporting unit. Within the
cargo units, the sorting is as mentioned above. This is as in Civ4
standard, but has some effects to the stacked views modes: cargo
units are displayed together with their transport unit in the same
stack, where the cargo units are on top off their transport unit. 
</P>
<OL START=2>
	<OL START=2>
		<LI><P STYLE="margin-bottom: 0cm">The above grouping is slightly
		changed : 
		</P>
		<UL>
			<LI><P STYLE="margin-bottom: 0cm">Player: player units first, then
			all other players in the order of their player id 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Domain: sea, air, land 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Selection group: ascending order
			by their internal group id. 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Combat strength: (strongest
			first) 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Unit type: by unit type id,
			descending 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Unit level: descending. 
			</P>
			<LI><P STYLE="margin-bottom: 0cm">Unit experience: descending 
			</P>
			<LI><P>Unit ID: ascending. This is just added to get a
			reproducible sorting in case anything else isn't unique. 
			</P>
		</UL>
	</OL>
</OL>
<P>Again, cargo units are displayed together with their transport
units. This view is ideal to create complex selection groups. </P>
<P>Tip : try the &quot;Group&quot; grouping and create selection
group by selecting single units holding the shift key down. Looks
funny ;) </P>
<BR>
</BODY>
</HTML>